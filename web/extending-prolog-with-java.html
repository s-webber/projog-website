<p>
Projog provides a mechanism for "plugging in" or "injecting" implementations of <a href="javadoc/org/projog/core/PredicateFactory.html" title="interface in org.projog.core"><code>PredicateFactory</code></a> at runtime. 
This mechanism provides an easy way to configure and extend the functionality of Projog - 
including adding functionality not possible to define in pure Prolog syntax.
</p>
<p>
Rather than directly implementing <code>PredicateFactory</code> it is recommended to 
extend either <a href="javadoc/org/projog/core/function/AbstractSingletonPredicate.html" title="class in org.projog.core.function"><code>AbstractSingletonPredicate</code></a>
or <a href="javadoc/org/projog/core/function/AbstractRetryablePredicate.html" title="class in org.projog.core.function"><code>AbstractRetryablePredicate</code></a>.
</p>

<h3>Example usage</h3>

<p>
If your project is configured using Maven then you can add a dependency on Projog by adding the following to your project's <code>pom.xml</code>:
</p>

<div class="code"><code>
&lt;dependency&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.projog&lt;/groupId&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;projog-core&lt;/artifactId&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;version&gt;@PROJOG_VERSION@&lt;/version&gt;<br>
&lt;/dependency&gt;</code></div>

<p>
Contents of <a href="https://github.com/s-webber/projog-examples/blob/master/calling-java-from-prolog/src/main/java/com/example/SingletonPredicateExample.java" target="_blank">
<code>com/example/SingletonPredicateExample.java</code></a>:
</p>

<div class="code"><code>package com.example;<br>
<br>
import static org.projog.core.term.TermUtils.getAtomName;<br>
<br>
import org.projog.core.function.AbstractSingletonPredicate;<br>
import org.projog.core.term.Atom;<br>
import org.projog.core.term.Term;<br>
<br>
/**<br>
 * &lt;code&gt;uppercase(X,Y)&lt;/code&gt; - succeeds if the atom represented by Y is equal to an upper case version of the atom<br>
 * represented by X.<br>
 */<br>
public class SingletonPredicateExample extends AbstractSingletonPredicate {<br>
&nbsp;&nbsp;&nbsp;@Override<br>
&nbsp;&nbsp;&nbsp;public boolean evaluate(Term term1, Term term2) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Atom upperCaseTerm1 = new Atom(getAtomName(term1).toUpperCase());<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return term2.unify(upperCaseTerm1);<br>
&nbsp;&nbsp;&nbsp;}<br>
}</code></div>

<p>
Example of integrating <code>org.projog.example.SingletonPredicateExample</code> into Projog:
</p>

<div class="code"><pre>
?- pj_add_predicate(uppercase/2, 'org.projog.example.SingletonPredicateExample').

yes

?- uppercase('The quick brown fox jumps over the lazy dog', X).
X = THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG

yes

?- uppercase('The quick brown fox jumps over the lazy dog', 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG').

yes

?- uppercase('The quick brown fox jumps over the lazy dog', 'THE QUICK BROWN BOX JUMPS OVER THE LAZY FOG').

no
</pre></div>

<p>
Contents of <code>com/example/RetryablePredicateExample.java</code>:
</p>

<div class="code"><code>package com.example;<br>
<br>
import java.util.Iterator;<br>
import java.util.Map;<br>
import java.util.Map.Entry;<br>
<br>
import org.projog.core.function.AbstractRetryablePredicate;<br>
import org.projog.core.term.Atom;<br>
import org.projog.core.term.Term;<br>
<br>
public class RetryablePredicateExample extends AbstractRetryablePredicate {<br>
&nbsp;&nbsp;&nbsp;private Iterator&lt;Map.Entry&lt;Object, Object&gt;&gt; systemProperties;<br>
<br>
&nbsp;&nbsp;&nbsp;@Override<br>
&nbsp;&nbsp;&nbsp;public boolean evaluate(Term arg1, Term arg2) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (systemProperties == null) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemProperties = System.getProperties().entrySet().iterator();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (systemProperties.hasNext()) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg1.backtrack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg2.backtrack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entry&lt;Object, Object&gt; entry = systemProperties.next();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String key = (String) entry.getKey();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String value = (String) entry.getValue();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (arg1.unify(new Atom(key)) &amp;&amp; arg2.unify(new Atom(value))) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br>
&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;@Override<br>
&nbsp;&nbsp;&nbsp;public RetryablePredicateExample getPredicate(Term arg1, Term arg2) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return new RetryablePredicateExample();<br>
&nbsp;&nbsp;&nbsp;}<br>
}</code></div>

<p>
Example of integrating <code>com.example.RetryablePredicateExample</code> into Projog:
</p>

<div class="code"><pre>
?- pj_add_predicate(props/2, 'com.example.RetryablePredicateExample').

yes

?- props('java.vm.vendor',Y).
Y = Oracle Corporation

yes ;

no

?- props(X,Y).
X = java.runtime.name
Y = Java(TM) SE Runtime Environment

yes ;

X = java.vm.vendor
Y = Oracle Corporation

yes ;

X = java.vendor.url
Y = http://java.oracle.com/
</pre></div>

<h3>See Also</h3>
<ul>
<li><a href="AddPredicateFactory.html">pj_add_predicate/2</li>
<li><a href="https://github.com/s-webber/projog-examples/tree/master" target="_blank">The "projog-examples" GitHub project</a></li>
</ul>